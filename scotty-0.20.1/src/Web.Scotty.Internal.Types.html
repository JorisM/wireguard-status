<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# language ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-11"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Web.Scotty.Internal.Types</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Blaze.ByteString.Builder</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Builder</span></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Concurrent.MVar</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Concurrent.STM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TVar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">atomically</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">readTVarIO</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">modifyTVar'</span></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">E</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadPlus</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Base</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadBase</span></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Catch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadCatch</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">MonadThrow</span></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Error.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadError</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadIO</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">UnliftIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadUnliftIO</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Reader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadReader</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ReaderT</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">asks</span></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.State.Strict</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">State</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">StateT</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadTrans</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Control</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadBaseControl</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">MonadTransControl</span></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy.Char8</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LBS8</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Default.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Default</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">def</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IsString</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Text.Lazy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">pack</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.HTTP.Types</span></span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.Wai</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Middleware</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Application</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Network.Wai</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Wai</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.Wai.Handler.Warp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Settings</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">defaultSettings</span></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.Wai.Parse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">FileInfo</span></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Web.Scotty.Exceptions.html"><span class="hs-identifier">Web.Scotty.Exceptions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Handler</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">catch</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">catches</span></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-comment">--------------------- Options -----------------------</span><span>
</span><span id="line-48"></span><span class="hs-keyword">data</span><span> </span><span id="Options"><span class="annot"><a href="Web.Scotty.Internal.Types.html#Options"><span class="hs-identifier hs-var">Options</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Options"><span class="annot"><a href="Web.Scotty.Internal.Types.html#Options"><span class="hs-identifier hs-var">Options</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="verbose"><span class="annot"><span class="annottext">Options -&gt; Int
</span><a href="Web.Scotty.Internal.Types.html#verbose"><span class="hs-identifier hs-var hs-var">verbose</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ 0 = silent, 1(def) = startup banner</span></span><span>
</span><span id="line-49"></span><span>                       </span><span class="hs-special">,</span><span> </span><span id="settings"><span class="annot"><span class="annottext">Options -&gt; Settings
</span><a href="Web.Scotty.Internal.Types.html#settings"><span class="hs-identifier hs-var hs-var">settings</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Settings</span></span><span> </span><span class="hs-comment">-- ^ Warp 'Settings'</span><span>
</span><span id="line-50"></span><span>                                              </span><span class="hs-comment">-- Note: to work around an issue in warp,</span><span>
</span><span id="line-51"></span><span>                                              </span><span class="hs-comment">-- the default FD cache duration is set to 0</span><span>
</span><span id="line-52"></span><span>                                              </span><span class="hs-comment">-- so changes to static files are always picked</span><span>
</span><span id="line-53"></span><span>                                              </span><span class="hs-comment">-- up. This likely has performance implications,</span><span>
</span><span id="line-54"></span><span>                                              </span><span class="hs-comment">-- so you may want to modify this for production</span><span>
</span><span id="line-55"></span><span>                                              </span><span class="hs-comment">-- servers using `setFdCacheDuration`.</span><span>
</span><span id="line-56"></span><span>                       </span><span class="hs-special">}</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-59"></span><span>  </span><span id="local-6989586621679118793"><span class="annot"><span class="annottext">def :: Options
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="Web.Scotty.Internal.Types.html#defaultOptions"><span class="hs-identifier hs-var">defaultOptions</span></a></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="annot"><a href="Web.Scotty.Internal.Types.html#defaultOptions"><span class="hs-identifier hs-type">defaultOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-62"></span><span id="defaultOptions"><span class="annot"><span class="annottext">defaultOptions :: Options
</span><a href="Web.Scotty.Internal.Types.html#defaultOptions"><span class="hs-identifier hs-var hs-var">defaultOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Settings -&gt; Options
</span><a href="Web.Scotty.Internal.Types.html#Options"><span class="hs-identifier hs-var">Options</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Settings
</span><span class="hs-identifier hs-var">defaultSettings</span></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-keyword">newtype</span><span> </span><span id="RouteOptions"><span class="annot"><a href="Web.Scotty.Internal.Types.html#RouteOptions"><span class="hs-identifier hs-var">RouteOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RouteOptions"><span class="annot"><a href="Web.Scotty.Internal.Types.html#RouteOptions"><span class="hs-identifier hs-var">RouteOptions</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="maxRequestBodySize"><span class="annot"><span class="annottext">RouteOptions -&gt; Maybe Int
</span><a href="Web.Scotty.Internal.Types.html#maxRequestBodySize"><span class="hs-identifier hs-var hs-var">maxRequestBodySize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#Kilobytes"><span class="hs-identifier hs-type">Kilobytes</span></a></span><span> </span><span class="hs-comment">-- max allowed request size in KB</span><span>
</span><span id="line-65"></span><span>                                    </span><span class="hs-special">}</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#RouteOptions"><span class="hs-identifier hs-type">RouteOptions</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-68"></span><span>    </span><span id="local-6989586621679118800"><span class="annot"><span class="annottext">def :: RouteOptions
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RouteOptions
</span><a href="Web.Scotty.Internal.Types.html#defaultRouteOptions"><span class="hs-identifier hs-var">defaultRouteOptions</span></a></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="annot"><a href="Web.Scotty.Internal.Types.html#defaultRouteOptions"><span class="hs-identifier hs-type">defaultRouteOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#RouteOptions"><span class="hs-identifier hs-type">RouteOptions</span></a></span><span>
</span><span id="line-71"></span><span id="defaultRouteOptions"><span class="annot"><span class="annottext">defaultRouteOptions :: RouteOptions
</span><a href="Web.Scotty.Internal.Types.html#defaultRouteOptions"><span class="hs-identifier hs-var hs-var">defaultRouteOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; RouteOptions
</span><a href="Web.Scotty.Internal.Types.html#RouteOptions"><span class="hs-identifier hs-var">RouteOptions</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-keyword">type</span><span> </span><span id="Kilobytes"><span class="annot"><a href="Web.Scotty.Internal.Types.html#Kilobytes"><span class="hs-identifier hs-var">Kilobytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-74"></span><span class="hs-comment">----- Transformer Aware Applications/Middleware -----</span><span>
</span><span id="line-75"></span><span class="hs-keyword">type</span><span> </span><span id="Middleware"><span class="annot"><a href="Web.Scotty.Internal.Types.html#Middleware"><span class="hs-identifier hs-var">Middleware</span></a></span></span><span> </span><span id="local-6989586621679118802"><span class="annot"><a href="#local-6989586621679118802"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#Application"><span class="hs-identifier hs-type">Application</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118802"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#Application"><span class="hs-identifier hs-type">Application</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118802"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">type</span><span> </span><span id="Application"><span class="annot"><a href="Web.Scotty.Internal.Types.html#Application"><span class="hs-identifier hs-var">Application</span></a></span></span><span> </span><span id="local-6989586621679118804"><span class="annot"><a href="#local-6989586621679118804"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679118804"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Response</span></span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-comment">------------------ Scotty Request Body --------------------</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-keyword">data</span><span> </span><span id="BodyChunkBuffer"><span class="annot"><a href="Web.Scotty.Internal.Types.html#BodyChunkBuffer"><span class="hs-identifier hs-var">BodyChunkBuffer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BodyChunkBuffer"><span class="annot"><a href="Web.Scotty.Internal.Types.html#BodyChunkBuffer"><span class="hs-identifier hs-var">BodyChunkBuffer</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="hasFinishedReadingChunks"><span class="annot"><span class="annottext">BodyChunkBuffer -&gt; Bool
</span><a href="Web.Scotty.Internal.Types.html#hasFinishedReadingChunks"><span class="hs-identifier hs-var hs-var">hasFinishedReadingChunks</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ whether we've reached the end of the stream yet</span></span><span>
</span><span id="line-81"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span id="chunksReadSoFar"><span class="annot"><span class="annottext">BodyChunkBuffer -&gt; [ByteString]
</span><a href="Web.Scotty.Internal.Types.html#chunksReadSoFar"><span class="hs-identifier hs-var hs-var">chunksReadSoFar</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span class="hs-special">]</span><span>
</span><span id="line-82"></span><span>                                       </span><span class="hs-special">}</span><span>
</span><span id="line-83"></span><span class="hs-comment">-- | The key part of having two MVars is that we can &quot;clone&quot; the BodyInfo to create a copy where the index is reset to 0, but the chunk cache is the same. Passing a cloned BodyInfo into each matched route allows them each to start from the first chunk if they call bodyReader.</span><span>
</span><span id="line-84"></span><span class="hs-comment">--</span><span>
</span><span id="line-85"></span><span class="hs-comment">-- Introduced in (#308)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">data</span><span> </span><span id="BodyInfo"><span class="annot"><a href="Web.Scotty.Internal.Types.html#BodyInfo"><span class="hs-identifier hs-var">BodyInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BodyInfo"><span class="annot"><a href="Web.Scotty.Internal.Types.html#BodyInfo"><span class="hs-identifier hs-var">BodyInfo</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="bodyInfoReadProgress"><span class="annot"><span class="annottext">BodyInfo -&gt; MVar Int
</span><a href="Web.Scotty.Internal.Types.html#bodyInfoReadProgress"><span class="hs-identifier hs-var hs-var">bodyInfoReadProgress</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ index into the stream read so far</span></span><span>
</span><span id="line-87"></span><span>                         </span><span class="hs-special">,</span><span> </span><span id="bodyInfoChunkBuffer"><span class="annot"><span class="annottext">BodyInfo -&gt; MVar BodyChunkBuffer
</span><a href="Web.Scotty.Internal.Types.html#bodyInfoChunkBuffer"><span class="hs-identifier hs-var hs-var">bodyInfoChunkBuffer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#BodyChunkBuffer"><span class="hs-identifier hs-type">BodyChunkBuffer</span></a></span><span>
</span><span id="line-88"></span><span>                         </span><span class="hs-special">,</span><span> </span><span id="bodyInfoDirectChunkRead"><span class="annot"><span class="annottext">BodyInfo -&gt; IO ByteString
</span><a href="Web.Scotty.Internal.Types.html#bodyInfoDirectChunkRead"><span class="hs-identifier hs-var hs-var">bodyInfoDirectChunkRead</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ can be called to get more chunks</span></span><span>
</span><span id="line-89"></span><span>                         </span><span class="hs-special">}</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="hs-comment">--------------- Scotty Applications -----------------</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-keyword">data</span><span> </span><span id="ScottyState"><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-var">ScottyState</span></a></span></span><span> </span><span id="local-6989586621679118433"><span class="annot"><a href="#local-6989586621679118433"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-94"></span><span>    </span><span id="ScottyState"><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-var">ScottyState</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="middlewares"><span class="annot"><span class="annottext">forall (m :: * -&gt; *). ScottyState m -&gt; [Middleware]
</span><a href="Web.Scotty.Internal.Types.html#middlewares"><span class="hs-identifier hs-var hs-var">middlewares</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Wai.Middleware</span></span><span class="hs-special">]</span><span>
</span><span id="line-95"></span><span>                </span><span class="hs-special">,</span><span> </span><span id="routes"><span class="annot"><span class="annottext">forall (m :: * -&gt; *). ScottyState m -&gt; [BodyInfo -&gt; Middleware m]
</span><a href="Web.Scotty.Internal.Types.html#routes"><span class="hs-identifier hs-var hs-var">routes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#BodyInfo"><span class="hs-identifier hs-type">BodyInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#Middleware"><span class="hs-identifier hs-type">Middleware</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118433"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-96"></span><span>                </span><span class="hs-special">,</span><span> </span><span id="handler"><span class="annot"><span class="annottext">forall (m :: * -&gt; *). ScottyState m -&gt; Maybe (ErrorHandler m)
</span><a href="Web.Scotty.Internal.Types.html#handler"><span class="hs-identifier hs-var hs-var">handler</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ErrorHandler"><span class="hs-identifier hs-type">ErrorHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118433"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>                </span><span class="hs-special">,</span><span> </span><span id="routeOptions"><span class="annot"><span class="annottext">forall (m :: * -&gt; *). ScottyState m -&gt; RouteOptions
</span><a href="Web.Scotty.Internal.Types.html#routeOptions"><span class="hs-identifier hs-var hs-var">routeOptions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#RouteOptions"><span class="hs-identifier hs-type">RouteOptions</span></a></span><span>
</span><span id="line-98"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679118443"><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-type">ScottyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118443"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-101"></span><span>  </span><span id="local-6989586621679118820"><span class="annot"><span class="annottext">def :: ScottyState m
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScottyState m
forall (m :: * -&gt; *). ScottyState m
</span><a href="Web.Scotty.Internal.Types.html#defaultScottyState"><span class="hs-identifier hs-var">defaultScottyState</span></a></span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span id="local-6989586621679118822"><span class="annot"><a href="Web.Scotty.Internal.Types.html#defaultScottyState"><span class="hs-identifier hs-type">defaultScottyState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-type">ScottyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118822"><span class="hs-identifier hs-type">m</span></a></span></span><span>
</span><span id="line-104"></span><span id="defaultScottyState"><span class="annot"><span class="annottext">defaultScottyState :: forall (m :: * -&gt; *). ScottyState m
</span><a href="Web.Scotty.Internal.Types.html#defaultScottyState"><span class="hs-identifier hs-var hs-var">defaultScottyState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Middleware]
-&gt; [BodyInfo -&gt; Middleware m]
-&gt; Maybe (ErrorHandler m)
-&gt; RouteOptions
-&gt; ScottyState m
forall (m :: * -&gt; *).
[Middleware]
-&gt; [BodyInfo -&gt; Middleware m]
-&gt; Maybe (ErrorHandler m)
-&gt; RouteOptions
-&gt; ScottyState m
</span><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-var">ScottyState</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Maybe (ErrorHandler m)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">RouteOptions
</span><a href="Web.Scotty.Internal.Types.html#defaultRouteOptions"><span class="hs-identifier hs-var">defaultRouteOptions</span></a></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span id="local-6989586621679118445"><span class="annot"><a href="Web.Scotty.Internal.Types.html#addMiddleware"><span class="hs-identifier hs-type">addMiddleware</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Wai.Middleware</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-type">ScottyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118445"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-type">ScottyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118445"><span class="hs-identifier hs-type">m</span></a></span></span><span>
</span><span id="line-107"></span><span id="addMiddleware"><span class="annot"><span class="annottext">addMiddleware :: forall (m :: * -&gt; *). Middleware -&gt; ScottyState m -&gt; ScottyState m
</span><a href="Web.Scotty.Internal.Types.html#addMiddleware"><span class="hs-identifier hs-var hs-var">addMiddleware</span></a></span></span><span> </span><span id="local-6989586621679118824"><span class="annot"><span class="annottext">Middleware
</span><a href="#local-6989586621679118824"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679118825"><span class="annot"><span class="annottext">s :: ScottyState m
</span><a href="#local-6989586621679118825"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-type">ScottyState</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">middlewares :: forall (m :: * -&gt; *). ScottyState m -&gt; [Middleware]
</span><a href="Web.Scotty.Internal.Types.html#middlewares"><span class="hs-identifier hs-var">middlewares</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679118826"><span class="annot"><span class="annottext">[Middleware]
</span><a href="#local-6989586621679118826"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScottyState m
</span><a href="#local-6989586621679118825"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#middlewares"><span class="hs-identifier hs-var">middlewares</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679118824"><span class="hs-identifier hs-type">m</span></a></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><a href="#local-6989586621679118826"><span class="hs-identifier hs-type">ms</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span id="local-6989586621679118447"><span class="annot"><a href="Web.Scotty.Internal.Types.html#addRoute"><span class="hs-identifier hs-type">addRoute</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#BodyInfo"><span class="hs-identifier hs-type">BodyInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#Middleware"><span class="hs-identifier hs-type">Middleware</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118447"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-type">ScottyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118447"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-type">ScottyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118447"><span class="hs-identifier hs-type">m</span></a></span></span><span>
</span><span id="line-110"></span><span id="addRoute"><span class="annot"><span class="annottext">addRoute :: forall (m :: * -&gt; *).
(BodyInfo -&gt; Middleware m) -&gt; ScottyState m -&gt; ScottyState m
</span><a href="Web.Scotty.Internal.Types.html#addRoute"><span class="hs-identifier hs-var hs-var">addRoute</span></a></span></span><span> </span><span id="local-6989586621679118828"><span class="annot"><span class="annottext">BodyInfo -&gt; Middleware m
</span><a href="#local-6989586621679118828"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621679118829"><span class="annot"><span class="annottext">s :: ScottyState m
</span><a href="#local-6989586621679118829"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-type">ScottyState</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">routes :: forall (m :: * -&gt; *). ScottyState m -&gt; [BodyInfo -&gt; Middleware m]
</span><a href="Web.Scotty.Internal.Types.html#routes"><span class="hs-identifier hs-var">routes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679118830"><span class="annot"><span class="annottext">[BodyInfo -&gt; Middleware m]
</span><a href="#local-6989586621679118830"><span class="hs-identifier hs-var">rs</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScottyState m
</span><a href="#local-6989586621679118829"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#routes"><span class="hs-identifier hs-var">routes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679118828"><span class="hs-identifier hs-type">r</span></a></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><a href="#local-6989586621679118830"><span class="hs-identifier hs-type">rs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span id="local-6989586621679118449"><span class="annot"><a href="Web.Scotty.Internal.Types.html#setHandler"><span class="hs-identifier hs-type">setHandler</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ErrorHandler"><span class="hs-identifier hs-type">ErrorHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118449"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-type">ScottyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118449"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-type">ScottyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118449"><span class="hs-identifier hs-type">m</span></a></span></span><span>
</span><span id="line-113"></span><span id="setHandler"><span class="annot"><span class="annottext">setHandler :: forall (m :: * -&gt; *).
Maybe (ErrorHandler m) -&gt; ScottyState m -&gt; ScottyState m
</span><a href="Web.Scotty.Internal.Types.html#setHandler"><span class="hs-identifier hs-var hs-var">setHandler</span></a></span></span><span> </span><span id="local-6989586621679118832"><span class="annot"><span class="annottext">Maybe (ErrorHandler m)
</span><a href="#local-6989586621679118832"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679118833"><span class="annot"><span class="annottext">ScottyState m
</span><a href="#local-6989586621679118833"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScottyState m
</span><a href="#local-6989586621679118833"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#handler"><span class="hs-identifier hs-var">handler</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679118832"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span id="local-6989586621679118451"><span class="annot"><a href="Web.Scotty.Internal.Types.html#updateMaxRequestBodySize"><span class="hs-identifier hs-type">updateMaxRequestBodySize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#RouteOptions"><span class="hs-identifier hs-type">RouteOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-type">ScottyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118451"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-type">ScottyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118451"><span class="hs-identifier hs-type">m</span></a></span></span><span>
</span><span id="line-116"></span><span id="updateMaxRequestBodySize"><span class="annot"><span class="annottext">updateMaxRequestBodySize :: forall (m :: * -&gt; *).
RouteOptions -&gt; ScottyState m -&gt; ScottyState m
</span><a href="Web.Scotty.Internal.Types.html#updateMaxRequestBodySize"><span class="hs-identifier hs-var hs-var">updateMaxRequestBodySize</span></a></span></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#RouteOptions"><span class="hs-identifier hs-type">RouteOptions</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679118835"><span class="annot"><span class="annottext">Maybe Int
maxRequestBodySize :: RouteOptions -&gt; Maybe Int
maxRequestBodySize :: Maybe Int
</span><a href="Web.Scotty.Internal.Types.html#maxRequestBodySize"><span class="hs-glyph hs-var hs-var">..</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span id="local-6989586621679118836"><span class="annot"><span class="annottext">s :: ScottyState m
</span><a href="#local-6989586621679118836"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-type">ScottyState</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">routeOptions :: forall (m :: * -&gt; *). ScottyState m -&gt; RouteOptions
</span><a href="Web.Scotty.Internal.Types.html#routeOptions"><span class="hs-identifier hs-var">routeOptions</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679118837"><span class="annot"><span class="annottext">RouteOptions
</span><a href="#local-6989586621679118837"><span class="hs-identifier hs-var">ro</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679118838"><span class="annot"><span class="annottext">ro' :: RouteOptions
</span><a href="#local-6989586621679118838"><span class="hs-identifier hs-var hs-var">ro'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RouteOptions
</span><a href="#local-6989586621679118837"><span class="hs-identifier hs-var">ro</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#maxRequestBodySize"><span class="hs-identifier hs-var">maxRequestBodySize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679118835"><span class="hs-identifier hs-type">maxRequestBodySize</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">ScottyState m
</span><a href="#local-6989586621679118836"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#routeOptions"><span class="hs-identifier hs-var">routeOptions</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679118838"><span class="hs-identifier hs-type">ro'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="hs-keyword">newtype</span><span> </span><span id="ScottyT"><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyT"><span class="hs-identifier hs-var">ScottyT</span></a></span></span><span> </span><span id="local-6989586621679118453"><span class="annot"><a href="#local-6989586621679118453"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679118454"><span class="annot"><a href="#local-6989586621679118454"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ScottyT"><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyT"><span class="hs-identifier hs-var">ScottyT</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="runS"><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. ScottyT m a -&gt; State (ScottyState m) a
</span><a href="Web.Scotty.Internal.Types.html#runS"><span class="hs-identifier hs-var hs-var">runS</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">State</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyState"><span class="hs-identifier hs-type">ScottyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118453"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679118454"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679118842"><span id="local-6989586621679118848"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; ScottyT m a -&gt; ScottyT m b)
-&gt; (forall a b. a -&gt; ScottyT m b -&gt; ScottyT m a)
-&gt; Functor (ScottyT m)
forall a b. a -&gt; ScottyT m b -&gt; ScottyT m a
forall a b. (a -&gt; b) -&gt; ScottyT m a -&gt; ScottyT m b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
forall (m :: * -&gt; *) a b. a -&gt; ScottyT m b -&gt; ScottyT m a
forall (m :: * -&gt; *) a b. (a -&gt; b) -&gt; ScottyT m a -&gt; ScottyT m b
$cfmap :: forall (m :: * -&gt; *) a b. (a -&gt; b) -&gt; ScottyT m a -&gt; ScottyT m b
fmap :: forall a b. (a -&gt; b) -&gt; ScottyT m a -&gt; ScottyT m b
$c&lt;$ :: forall (m :: * -&gt; *) a b. a -&gt; ScottyT m b -&gt; ScottyT m a
&lt;$ :: forall a b. a -&gt; ScottyT m b -&gt; ScottyT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679118858"><span id="local-6989586621679118865"><span id="local-6989586621679118871"><span id="local-6989586621679118877"><span id="local-6989586621679118883"><span class="annot"><span class="annottext">Functor (ScottyT m)
Functor (ScottyT m) =&gt;
(forall a. a -&gt; ScottyT m a)
-&gt; (forall a b. ScottyT m (a -&gt; b) -&gt; ScottyT m a -&gt; ScottyT m b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c) -&gt; ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m c)
-&gt; (forall a b. ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m b)
-&gt; (forall a b. ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m a)
-&gt; Applicative (ScottyT m)
forall a. a -&gt; ScottyT m a
forall a b. ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m a
forall a b. ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m b
forall a b. ScottyT m (a -&gt; b) -&gt; ScottyT m a -&gt; ScottyT m b
forall a b c.
(a -&gt; b -&gt; c) -&gt; ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m c
forall (m :: * -&gt; *). Functor (ScottyT m)
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
forall (m :: * -&gt; *) a. a -&gt; ScottyT m a
forall (m :: * -&gt; *) a b. ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m a
forall (m :: * -&gt; *) a b. ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m b
forall (m :: * -&gt; *) a b.
ScottyT m (a -&gt; b) -&gt; ScottyT m a -&gt; ScottyT m b
forall (m :: * -&gt; *) a b c.
(a -&gt; b -&gt; c) -&gt; ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m c
$cpure :: forall (m :: * -&gt; *) a. a -&gt; ScottyT m a
pure :: forall a. a -&gt; ScottyT m a
$c&lt;*&gt; :: forall (m :: * -&gt; *) a b.
ScottyT m (a -&gt; b) -&gt; ScottyT m a -&gt; ScottyT m b
&lt;*&gt; :: forall a b. ScottyT m (a -&gt; b) -&gt; ScottyT m a -&gt; ScottyT m b
$cliftA2 :: forall (m :: * -&gt; *) a b c.
(a -&gt; b -&gt; c) -&gt; ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m c
liftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m c
$c*&gt; :: forall (m :: * -&gt; *) a b. ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m b
*&gt; :: forall a b. ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m b
$c&lt;* :: forall (m :: * -&gt; *) a b. ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m a
&lt;* :: forall a b. ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679118894"><span id="local-6989586621679118900"><span id="local-6989586621679118905"><span class="annot"><span class="annottext">Applicative (ScottyT m)
Applicative (ScottyT m) =&gt;
(forall a b. ScottyT m a -&gt; (a -&gt; ScottyT m b) -&gt; ScottyT m b)
-&gt; (forall a b. ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m b)
-&gt; (forall a. a -&gt; ScottyT m a)
-&gt; Monad (ScottyT m)
forall a. a -&gt; ScottyT m a
forall a b. ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m b
forall a b. ScottyT m a -&gt; (a -&gt; ScottyT m b) -&gt; ScottyT m b
forall (m :: * -&gt; *). Applicative (ScottyT m)
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
forall (m :: * -&gt; *) a. a -&gt; ScottyT m a
forall (m :: * -&gt; *) a b. ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m b
forall (m :: * -&gt; *) a b.
ScottyT m a -&gt; (a -&gt; ScottyT m b) -&gt; ScottyT m b
$c&gt;&gt;= :: forall (m :: * -&gt; *) a b.
ScottyT m a -&gt; (a -&gt; ScottyT m b) -&gt; ScottyT m b
&gt;&gt;= :: forall a b. ScottyT m a -&gt; (a -&gt; ScottyT m b) -&gt; ScottyT m b
$c&gt;&gt; :: forall (m :: * -&gt; *) a b. ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m b
&gt;&gt; :: forall a b. ScottyT m a -&gt; ScottyT m b -&gt; ScottyT m b
$creturn :: forall (m :: * -&gt; *) a. a -&gt; ScottyT m a
return :: forall a. a -&gt; ScottyT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-comment">------------------ Scotty Errors --------------------</span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-comment">-- | Internal exception mechanism used to modify the request processing flow.</span><span>
</span><span id="line-127"></span><span class="hs-comment">--</span><span>
</span><span id="line-128"></span><span class="hs-comment">-- The exception constructor is not exposed to the user and all exceptions of this type are caught</span><span>
</span><span id="line-129"></span><span class="hs-comment">-- and processed within the 'runAction' function.</span><span>
</span><span id="line-130"></span><span class="hs-keyword">data</span><span> </span><span id="ActionError"><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionError"><span class="hs-identifier hs-var">ActionError</span></a></span></span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="AERedirect"><span class="annot"><a href="Web.Scotty.Internal.Types.html#AERedirect"><span class="hs-identifier hs-var">AERedirect</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Redirect</span></span><span>
</span><span id="line-132"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AENext"><span class="annot"><a href="Web.Scotty.Internal.Types.html#AENext"><span class="hs-identifier hs-var">AENext</span></a></span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Stop processing this route and skip to the next one</span></span><span>
</span><span id="line-133"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AEFinish"><span class="annot"><a href="Web.Scotty.Internal.Types.html#AEFinish"><span class="hs-identifier hs-var">AEFinish</span></a></span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Stop processing the request</span></span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679118915"><span id="local-6989586621679118921"><span id="local-6989586621679118925"><span class="annot"><span class="annottext">Int -&gt; ActionError -&gt; ShowS
[ActionError] -&gt; ShowS
ActionError -&gt; String
(Int -&gt; ActionError -&gt; ShowS)
-&gt; (ActionError -&gt; String)
-&gt; ([ActionError] -&gt; ShowS)
-&gt; Show ActionError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; ActionError -&gt; ShowS
showsPrec :: Int -&gt; ActionError -&gt; ShowS
$cshow :: ActionError -&gt; String
show :: ActionError -&gt; String
$cshowList :: [ActionError] -&gt; ShowS
showList :: [ActionError] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679118933"><span id="local-6989586621679118937"><span id="local-6989586621679118940"><span class="annot"><span class="hs-identifier hs-type">E.Exception</span></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionError"><span class="hs-identifier hs-type">ActionError</span></a></span></span></span></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span id="local-6989586621679118523"><span id="local-6989586621679118525"><span class="annot"><a href="Web.Scotty.Internal.Types.html#tryNext"><span class="hs-identifier hs-type">tryNext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679118523"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679118523"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118525"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679118523"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span><span>
</span><span id="line-138"></span><span id="tryNext"><span class="annot"><span class="annottext">tryNext :: forall (m :: * -&gt; *) a. MonadUnliftIO m =&gt; m a -&gt; m Bool
</span><a href="Web.Scotty.Internal.Types.html#tryNext"><span class="hs-identifier hs-var hs-var">tryNext</span></a></span></span><span> </span><span id="local-6989586621679118957"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679118957"><span class="hs-identifier hs-var">io</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m Bool -&gt; (ActionError -&gt; m Bool) -&gt; m Bool
forall (m :: * -&gt; *) e a.
(MonadUnliftIO m, Exception e) =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><span class="hs-identifier hs-var">catch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679118957"><span class="hs-identifier hs-var">io</span></a></span><span> </span><span class="annot"><span class="annottext">m a -&gt; m Bool -&gt; m Bool
forall a b. m a -&gt; m b -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; m Bool
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((ActionError -&gt; m Bool) -&gt; m Bool)
-&gt; (ActionError -&gt; m Bool) -&gt; m Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679118958"><span class="annot"><span class="annottext">ActionError
</span><a href="#local-6989586621679118958"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ActionError
</span><a href="#local-6989586621679118958"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-140"></span><span>    </span><span class="annot"><span class="annottext">ActionError
</span><a href="Web.Scotty.Internal.Types.html#AENext"><span class="hs-identifier hs-var">AENext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; m Bool
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-141"></span><span>    </span><span class="annot"><span class="annottext">ActionError
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; m Bool
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="annot"><span class="hs-comment">-- | E.g. when a parameter is not found in a query string (400 Bad Request) or when parsing a JSON body fails (422 Unprocessable Entity)</span></span><span>
</span><span id="line-144"></span><span class="hs-keyword">data</span><span> </span><span id="StatusError"><span class="annot"><a href="Web.Scotty.Internal.Types.html#StatusError"><span class="hs-identifier hs-var">StatusError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="StatusError"><span class="annot"><a href="Web.Scotty.Internal.Types.html#StatusError"><span class="hs-identifier hs-var">StatusError</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Status</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679118961"><span id="local-6989586621679118967"><span id="local-6989586621679118971"><span class="annot"><span class="annottext">Int -&gt; StatusError -&gt; ShowS
[StatusError] -&gt; ShowS
StatusError -&gt; String
(Int -&gt; StatusError -&gt; ShowS)
-&gt; (StatusError -&gt; String)
-&gt; ([StatusError] -&gt; ShowS)
-&gt; Show StatusError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; StatusError -&gt; ShowS
showsPrec :: Int -&gt; StatusError -&gt; ShowS
$cshow :: StatusError -&gt; String
show :: StatusError -&gt; String
$cshowList :: [StatusError] -&gt; ShowS
showList :: [StatusError] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679118978"><span id="local-6989586621679118982"><span id="local-6989586621679118985"><span class="annot"><span class="hs-identifier hs-type">E.Exception</span></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#StatusError"><span class="hs-identifier hs-type">StatusError</span></a></span></span></span></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span class="annot"><span class="hs-comment">-- | Specializes a 'Handler' to the 'ActionT' monad</span></span><span>
</span><span id="line-148"></span><span class="hs-keyword">type</span><span> </span><span id="ErrorHandler"><span class="annot"><a href="Web.Scotty.Internal.Types.html#ErrorHandler"><span class="hs-identifier hs-var">ErrorHandler</span></a></span></span><span> </span><span id="local-6989586621679118989"><span class="annot"><a href="#local-6989586621679118989"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Handler</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionT"><span class="hs-identifier hs-type">ActionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118989"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="annot"><span class="hs-comment">-- | Thrown e.g. when a request is too large</span></span><span>
</span><span id="line-151"></span><span class="hs-keyword">data</span><span> </span><span id="ScottyException"><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyException"><span class="hs-identifier hs-var">ScottyException</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RequestException"><span class="annot"><a href="Web.Scotty.Internal.Types.html#RequestException"><span class="hs-identifier hs-var">RequestException</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Status</span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679118992"><span id="local-6989586621679118998"><span id="local-6989586621679119002"><span class="annot"><span class="annottext">Int -&gt; ScottyException -&gt; ShowS
[ScottyException] -&gt; ShowS
ScottyException -&gt; String
(Int -&gt; ScottyException -&gt; ShowS)
-&gt; (ScottyException -&gt; String)
-&gt; ([ScottyException] -&gt; ShowS)
-&gt; Show ScottyException
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; ScottyException -&gt; ShowS
showsPrec :: Int -&gt; ScottyException -&gt; ShowS
$cshow :: ScottyException -&gt; String
show :: ScottyException -&gt; String
$cshowList :: [ScottyException] -&gt; ShowS
showList :: [ScottyException] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679119009"><span id="local-6989586621679119013"><span id="local-6989586621679119016"><span class="annot"><span class="hs-identifier hs-type">E.Exception</span></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyException"><span class="hs-identifier hs-type">ScottyException</span></a></span></span></span></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-comment">------------------ Scotty Actions -------------------</span><span>
</span><span id="line-155"></span><span class="hs-keyword">type</span><span> </span><span id="Param"><span class="annot"><a href="Web.Scotty.Internal.Types.html#Param"><span class="hs-identifier hs-var">Param</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-keyword">type</span><span> </span><span id="File"><span class="annot"><a href="Web.Scotty.Internal.Types.html#File"><span class="hs-identifier hs-var">File</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FileInfo</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LBS8.ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-keyword">data</span><span> </span><span id="ActionEnv"><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionEnv"><span class="hs-identifier hs-var">ActionEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Env"><span class="annot"><a href="Web.Scotty.Internal.Types.html#Env"><span class="hs-identifier hs-var">Env</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="envReq"><span class="annot"><span class="annottext">ActionEnv -&gt; Request
</span><a href="Web.Scotty.Internal.Types.html#envReq"><span class="hs-identifier hs-var hs-var">envReq</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span>
</span><span id="line-160"></span><span>                     </span><span class="hs-special">,</span><span> </span><span id="envCaptureParams"><span class="annot"><span class="annottext">ActionEnv -&gt; [Param]
</span><a href="Web.Scotty.Internal.Types.html#envCaptureParams"><span class="hs-identifier hs-var hs-var">envCaptureParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#Param"><span class="hs-identifier hs-type">Param</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-161"></span><span>                     </span><span class="hs-special">,</span><span> </span><span id="envFormParams"><span class="annot"><span class="annottext">ActionEnv -&gt; [Param]
</span><a href="Web.Scotty.Internal.Types.html#envFormParams"><span class="hs-identifier hs-var hs-var">envFormParams</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#Param"><span class="hs-identifier hs-type">Param</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-162"></span><span>                     </span><span class="hs-special">,</span><span> </span><span id="envQueryParams"><span class="annot"><span class="annottext">ActionEnv -&gt; [Param]
</span><a href="Web.Scotty.Internal.Types.html#envQueryParams"><span class="hs-identifier hs-var hs-var">envQueryParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#Param"><span class="hs-identifier hs-type">Param</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-163"></span><span>                     </span><span class="hs-special">,</span><span> </span><span id="envBody"><span class="annot"><span class="annottext">ActionEnv -&gt; IO ByteString
</span><a href="Web.Scotty.Internal.Types.html#envBody"><span class="hs-identifier hs-var hs-var">envBody</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LBS8.ByteString</span></span><span>
</span><span id="line-164"></span><span>                     </span><span class="hs-special">,</span><span> </span><span id="envBodyChunk"><span class="annot"><span class="annottext">ActionEnv -&gt; IO ByteString
</span><a href="Web.Scotty.Internal.Types.html#envBodyChunk"><span class="hs-identifier hs-var hs-var">envBodyChunk</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span>
</span><span id="line-165"></span><span>                     </span><span class="hs-special">,</span><span> </span><span id="envFiles"><span class="annot"><span class="annottext">ActionEnv -&gt; [File]
</span><a href="Web.Scotty.Internal.Types.html#envFiles"><span class="hs-identifier hs-var hs-var">envFiles</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#File"><span class="hs-identifier hs-type">File</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-166"></span><span>                     </span><span class="hs-special">,</span><span> </span><span id="envResponse"><span class="annot"><span class="annottext">ActionEnv -&gt; TVar ScottyResponse
</span><a href="Web.Scotty.Internal.Types.html#envResponse"><span class="hs-identifier hs-var hs-var">envResponse</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TVar</span></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyResponse"><span class="hs-identifier hs-type">ScottyResponse</span></a></span><span>
</span><span id="line-167"></span><span>                     </span><span class="hs-special">}</span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span id="local-6989586621679118547"><span class="annot"><a href="Web.Scotty.Internal.Types.html#getResponse"><span class="hs-identifier hs-type">getResponse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679118547"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionEnv"><span class="hs-identifier hs-type">ActionEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679118547"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyResponse"><span class="hs-identifier hs-type">ScottyResponse</span></a></span></span><span>
</span><span id="line-170"></span><span id="getResponse"><span class="annot"><span class="annottext">getResponse :: forall (m :: * -&gt; *). MonadIO m =&gt; ActionEnv -&gt; m ScottyResponse
</span><a href="Web.Scotty.Internal.Types.html#getResponse"><span class="hs-identifier hs-var hs-var">getResponse</span></a></span></span><span> </span><span id="local-6989586621679119030"><span class="annot"><span class="annottext">ActionEnv
</span><a href="#local-6989586621679119030"><span class="hs-identifier hs-var">ae</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO ScottyResponse -&gt; m ScottyResponse
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO ScottyResponse -&gt; m ScottyResponse)
-&gt; IO ScottyResponse -&gt; m ScottyResponse
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TVar ScottyResponse -&gt; IO ScottyResponse
forall a. TVar a -&gt; IO a
</span><span class="hs-identifier hs-var">readTVarIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ActionEnv -&gt; TVar ScottyResponse
</span><a href="Web.Scotty.Internal.Types.html#envResponse"><span class="hs-identifier hs-var">envResponse</span></a></span><span> </span><span class="annot"><span class="annottext">ActionEnv
</span><a href="#local-6989586621679119030"><span class="hs-identifier hs-var">ae</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span id="local-6989586621679118551"><span class="annot"><a href="Web.Scotty.Internal.Types.html#modifyResponse"><span class="hs-identifier hs-type">modifyResponse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679118551"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyResponse"><span class="hs-identifier hs-type">ScottyResponse</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyResponse"><span class="hs-identifier hs-type">ScottyResponse</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionT"><span class="hs-identifier hs-type">ActionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118551"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-173"></span><span id="modifyResponse"><span class="annot"><span class="annottext">modifyResponse :: forall (m :: * -&gt; *).
MonadIO m =&gt;
(ScottyResponse -&gt; ScottyResponse) -&gt; ActionT m ()
</span><a href="Web.Scotty.Internal.Types.html#modifyResponse"><span class="hs-identifier hs-var hs-var">modifyResponse</span></a></span></span><span> </span><span id="local-6989586621679119041"><span class="annot"><span class="annottext">ScottyResponse -&gt; ScottyResponse
</span><a href="#local-6989586621679119041"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-174"></span><span>  </span><span id="local-6989586621679119042"><span class="annot"><span class="annottext">TVar ScottyResponse
</span><a href="#local-6989586621679119042"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ActionEnv -&gt; TVar ScottyResponse)
-&gt; ActionT m (TVar ScottyResponse)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">ActionEnv -&gt; TVar ScottyResponse
</span><a href="Web.Scotty.Internal.Types.html#envResponse"><span class="hs-identifier hs-var">envResponse</span></a></span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><span class="annottext">IO () -&gt; ActionT m ()
forall a. IO a -&gt; ActionT m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ActionT m ()) -&gt; IO () -&gt; ActionT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">STM () -&gt; IO ()
forall a. STM a -&gt; IO a
</span><span class="hs-identifier hs-var">atomically</span></span><span> </span><span class="annot"><span class="annottext">(STM () -&gt; IO ()) -&gt; STM () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TVar ScottyResponse -&gt; (ScottyResponse -&gt; ScottyResponse) -&gt; STM ()
forall a. TVar a -&gt; (a -&gt; a) -&gt; STM ()
</span><span class="hs-identifier hs-var">modifyTVar'</span></span><span> </span><span class="annot"><span class="annottext">TVar ScottyResponse
</span><a href="#local-6989586621679119042"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ScottyResponse -&gt; ScottyResponse
</span><a href="#local-6989586621679119041"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="hs-keyword">data</span><span> </span><span id="BodyPartiallyStreamed"><span class="annot"><a href="Web.Scotty.Internal.Types.html#BodyPartiallyStreamed"><span class="hs-identifier hs-var">BodyPartiallyStreamed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BodyPartiallyStreamed"><span class="annot"><a href="Web.Scotty.Internal.Types.html#BodyPartiallyStreamed"><span class="hs-identifier hs-var">BodyPartiallyStreamed</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679119045"><span id="local-6989586621679119047"><span id="local-6989586621679119051"><span class="annot"><span class="annottext">Int -&gt; BodyPartiallyStreamed -&gt; ShowS
[BodyPartiallyStreamed] -&gt; ShowS
BodyPartiallyStreamed -&gt; String
(Int -&gt; BodyPartiallyStreamed -&gt; ShowS)
-&gt; (BodyPartiallyStreamed -&gt; String)
-&gt; ([BodyPartiallyStreamed] -&gt; ShowS)
-&gt; Show BodyPartiallyStreamed
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; BodyPartiallyStreamed -&gt; ShowS
showsPrec :: Int -&gt; BodyPartiallyStreamed -&gt; ShowS
$cshow :: BodyPartiallyStreamed -&gt; String
show :: BodyPartiallyStreamed -&gt; String
$cshowList :: [BodyPartiallyStreamed] -&gt; ShowS
showList :: [BodyPartiallyStreamed] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679119058"><span id="local-6989586621679119062"><span id="local-6989586621679119065"><span class="annot"><span class="hs-identifier hs-type">E.Exception</span></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#BodyPartiallyStreamed"><span class="hs-identifier hs-type">BodyPartiallyStreamed</span></a></span></span></span></span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="hs-keyword">data</span><span> </span><span id="Content"><span class="annot"><a href="Web.Scotty.Internal.Types.html#Content"><span class="hs-identifier hs-var">Content</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ContentBuilder"><span class="annot"><a href="Web.Scotty.Internal.Types.html#ContentBuilder"><span class="hs-identifier hs-var">ContentBuilder</span></a></span></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Builder</span></span><span>
</span><span id="line-182"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span id="ContentFile"><span class="annot"><a href="Web.Scotty.Internal.Types.html#ContentFile"><span class="hs-identifier hs-var">ContentFile</span></a></span></span><span>     </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-183"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span id="ContentStream"><span class="annot"><a href="Web.Scotty.Internal.Types.html#ContentStream"><span class="hs-identifier hs-var">ContentStream</span></a></span></span><span>   </span><span class="annot"><span class="hs-identifier hs-type">StreamingBody</span></span><span>
</span><span id="line-184"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span id="ContentResponse"><span class="annot"><a href="Web.Scotty.Internal.Types.html#ContentResponse"><span class="hs-identifier hs-var">ContentResponse</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Response</span></span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="hs-keyword">data</span><span> </span><span id="ScottyResponse"><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyResponse"><span class="hs-identifier hs-var">ScottyResponse</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SR"><span class="annot"><a href="Web.Scotty.Internal.Types.html#SR"><span class="hs-identifier hs-var">SR</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="srStatus"><span class="annot"><span class="annottext">ScottyResponse -&gt; Status
</span><a href="Web.Scotty.Internal.Types.html#srStatus"><span class="hs-identifier hs-var hs-var">srStatus</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Status</span></span><span>
</span><span id="line-187"></span><span>                         </span><span class="hs-special">,</span><span> </span><span id="srHeaders"><span class="annot"><span class="annottext">ScottyResponse -&gt; ResponseHeaders
</span><a href="Web.Scotty.Internal.Types.html#srHeaders"><span class="hs-identifier hs-var hs-var">srHeaders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ResponseHeaders</span></span><span>
</span><span id="line-188"></span><span>                         </span><span class="hs-special">,</span><span> </span><span id="srContent"><span class="annot"><span class="annottext">ScottyResponse -&gt; Content
</span><a href="Web.Scotty.Internal.Types.html#srContent"><span class="hs-identifier hs-var hs-var">srContent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#Content"><span class="hs-identifier hs-type">Content</span></a></span><span>
</span><span id="line-189"></span><span>                         </span><span class="hs-special">}</span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="annot"><a href="Web.Scotty.Internal.Types.html#setContent"><span class="hs-identifier hs-type">setContent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#Content"><span class="hs-identifier hs-type">Content</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyResponse"><span class="hs-identifier hs-type">ScottyResponse</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyResponse"><span class="hs-identifier hs-type">ScottyResponse</span></a></span><span>
</span><span id="line-192"></span><span id="setContent"><span class="annot"><span class="annottext">setContent :: Content -&gt; ScottyResponse -&gt; ScottyResponse
</span><a href="Web.Scotty.Internal.Types.html#setContent"><span class="hs-identifier hs-var hs-var">setContent</span></a></span></span><span> </span><span id="local-6989586621679119078"><span class="annot"><span class="annottext">Content
</span><a href="#local-6989586621679119078"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679119079"><span class="annot"><span class="annottext">ScottyResponse
</span><a href="#local-6989586621679119079"><span class="hs-identifier hs-var">sr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScottyResponse
</span><a href="#local-6989586621679119079"><span class="hs-identifier hs-var">sr</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#srContent"><span class="hs-identifier hs-var">srContent</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679119078"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="annot"><a href="Web.Scotty.Internal.Types.html#setHeaderWith"><span class="hs-identifier hs-type">setHeaderWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HeaderName</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HeaderName</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyResponse"><span class="hs-identifier hs-type">ScottyResponse</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyResponse"><span class="hs-identifier hs-type">ScottyResponse</span></a></span><span>
</span><span id="line-195"></span><span id="setHeaderWith"><span class="annot"><span class="annottext">setHeaderWith :: (ResponseHeaders -&gt; ResponseHeaders)
-&gt; ScottyResponse -&gt; ScottyResponse
</span><a href="Web.Scotty.Internal.Types.html#setHeaderWith"><span class="hs-identifier hs-var hs-var">setHeaderWith</span></a></span></span><span> </span><span id="local-6989586621679119082"><span class="annot"><span class="annottext">ResponseHeaders -&gt; ResponseHeaders
</span><a href="#local-6989586621679119082"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679119083"><span class="annot"><span class="annottext">ScottyResponse
</span><a href="#local-6989586621679119083"><span class="hs-identifier hs-var">sr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScottyResponse
</span><a href="#local-6989586621679119083"><span class="hs-identifier hs-var">sr</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#srHeaders"><span class="hs-identifier hs-var">srHeaders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679119082"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#srHeaders"><span class="hs-identifier hs-var">srHeaders</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679119083"><span class="hs-identifier hs-type">sr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="annot"><a href="Web.Scotty.Internal.Types.html#setStatus"><span class="hs-identifier hs-type">setStatus</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Status</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyResponse"><span class="hs-identifier hs-type">ScottyResponse</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyResponse"><span class="hs-identifier hs-type">ScottyResponse</span></a></span><span>
</span><span id="line-198"></span><span id="setStatus"><span class="annot"><span class="annottext">setStatus :: Status -&gt; ScottyResponse -&gt; ScottyResponse
</span><a href="Web.Scotty.Internal.Types.html#setStatus"><span class="hs-identifier hs-var hs-var">setStatus</span></a></span></span><span> </span><span id="local-6989586621679119085"><span class="annot"><span class="annottext">Status
</span><a href="#local-6989586621679119085"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679119086"><span class="annot"><span class="annottext">ScottyResponse
</span><a href="#local-6989586621679119086"><span class="hs-identifier hs-var">sr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScottyResponse
</span><a href="#local-6989586621679119086"><span class="hs-identifier hs-var">sr</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#srStatus"><span class="hs-identifier hs-var">srStatus</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679119085"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyResponse"><span class="hs-identifier hs-type">ScottyResponse</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-201"></span><span>  </span><span id="local-6989586621679119089"><span class="annot"><span class="annottext">def :: ScottyResponse
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScottyResponse
</span><a href="Web.Scotty.Internal.Types.html#defaultScottyResponse"><span class="hs-identifier hs-var">defaultScottyResponse</span></a></span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span class="annot"><span class="hs-comment">-- | The default response has code 200 OK and empty body</span></span><span>
</span><span id="line-204"></span><span class="annot"><a href="Web.Scotty.Internal.Types.html#defaultScottyResponse"><span class="hs-identifier hs-type">defaultScottyResponse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyResponse"><span class="hs-identifier hs-type">ScottyResponse</span></a></span><span>
</span><span id="line-205"></span><span id="defaultScottyResponse"><span class="annot"><span class="annottext">defaultScottyResponse :: ScottyResponse
</span><a href="Web.Scotty.Internal.Types.html#defaultScottyResponse"><span class="hs-identifier hs-var hs-var">defaultScottyResponse</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Status -&gt; ResponseHeaders -&gt; Content -&gt; ScottyResponse
</span><a href="Web.Scotty.Internal.Types.html#SR"><span class="hs-identifier hs-var">SR</span></a></span><span> </span><span class="annot"><span class="annottext">Status
</span><span class="hs-identifier hs-var">status200</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Builder -&gt; Content
</span><a href="Web.Scotty.Internal.Types.html#ContentBuilder"><span class="hs-identifier hs-var">ContentBuilder</span></a></span><span> </span><span class="annot"><span class="annottext">Builder
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-keyword">newtype</span><span> </span><span id="ActionT"><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionT"><span class="hs-identifier hs-var">ActionT</span></a></span></span><span> </span><span id="local-6989586621679118568"><span class="annot"><a href="#local-6989586621679118568"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679118569"><span class="annot"><a href="#local-6989586621679118569"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ActionT"><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionT"><span class="hs-identifier hs-var">ActionT</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="runAM"><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. ActionT m a -&gt; ReaderT ActionEnv m a
</span><a href="Web.Scotty.Internal.Types.html#runAM"><span class="hs-identifier hs-var hs-var">runAM</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionEnv"><span class="hs-identifier hs-type">ActionEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118568"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118569"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-209"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679119095"><span id="local-6989586621679119100"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; ActionT m a -&gt; ActionT m b)
-&gt; (forall a b. a -&gt; ActionT m b -&gt; ActionT m a)
-&gt; Functor (ActionT m)
forall a b. a -&gt; ActionT m b -&gt; ActionT m a
forall a b. (a -&gt; b) -&gt; ActionT m a -&gt; ActionT m b
forall (m :: * -&gt; *) a b.
Functor m =&gt;
a -&gt; ActionT m b -&gt; ActionT m a
forall (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b) -&gt; ActionT m a -&gt; ActionT m b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b) -&gt; ActionT m a -&gt; ActionT m b
fmap :: forall a b. (a -&gt; b) -&gt; ActionT m a -&gt; ActionT m b
$c&lt;$ :: forall (m :: * -&gt; *) a b.
Functor m =&gt;
a -&gt; ActionT m b -&gt; ActionT m a
&lt;$ :: forall a b. a -&gt; ActionT m b -&gt; ActionT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679119109"><span id="local-6989586621679119114"><span id="local-6989586621679119118"><span id="local-6989586621679119122"><span id="local-6989586621679119126"><span class="annot"><span class="annottext">Functor (ActionT m)
Functor (ActionT m) =&gt;
(forall a. a -&gt; ActionT m a)
-&gt; (forall a b. ActionT m (a -&gt; b) -&gt; ActionT m a -&gt; ActionT m b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c) -&gt; ActionT m a -&gt; ActionT m b -&gt; ActionT m c)
-&gt; (forall a b. ActionT m a -&gt; ActionT m b -&gt; ActionT m b)
-&gt; (forall a b. ActionT m a -&gt; ActionT m b -&gt; ActionT m a)
-&gt; Applicative (ActionT m)
forall a. a -&gt; ActionT m a
forall a b. ActionT m a -&gt; ActionT m b -&gt; ActionT m a
forall a b. ActionT m a -&gt; ActionT m b -&gt; ActionT m b
forall a b. ActionT m (a -&gt; b) -&gt; ActionT m a -&gt; ActionT m b
forall a b c.
(a -&gt; b -&gt; c) -&gt; ActionT m a -&gt; ActionT m b -&gt; ActionT m c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
forall (m :: * -&gt; *). Applicative m =&gt; Functor (ActionT m)
forall (m :: * -&gt; *) a. Applicative m =&gt; a -&gt; ActionT m a
forall (m :: * -&gt; *) a b.
Applicative m =&gt;
ActionT m a -&gt; ActionT m b -&gt; ActionT m a
forall (m :: * -&gt; *) a b.
Applicative m =&gt;
ActionT m a -&gt; ActionT m b -&gt; ActionT m b
forall (m :: * -&gt; *) a b.
Applicative m =&gt;
ActionT m (a -&gt; b) -&gt; ActionT m a -&gt; ActionT m b
forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; c) -&gt; ActionT m a -&gt; ActionT m b -&gt; ActionT m c
$cpure :: forall (m :: * -&gt; *) a. Applicative m =&gt; a -&gt; ActionT m a
pure :: forall a. a -&gt; ActionT m a
$c&lt;*&gt; :: forall (m :: * -&gt; *) a b.
Applicative m =&gt;
ActionT m (a -&gt; b) -&gt; ActionT m a -&gt; ActionT m b
&lt;*&gt; :: forall a b. ActionT m (a -&gt; b) -&gt; ActionT m a -&gt; ActionT m b
$cliftA2 :: forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; c) -&gt; ActionT m a -&gt; ActionT m b -&gt; ActionT m c
liftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; ActionT m a -&gt; ActionT m b -&gt; ActionT m c
$c*&gt; :: forall (m :: * -&gt; *) a b.
Applicative m =&gt;
ActionT m a -&gt; ActionT m b -&gt; ActionT m b
*&gt; :: forall a b. ActionT m a -&gt; ActionT m b -&gt; ActionT m b
$c&lt;* :: forall (m :: * -&gt; *) a b.
Applicative m =&gt;
ActionT m a -&gt; ActionT m b -&gt; ActionT m a
&lt;* :: forall a b. ActionT m a -&gt; ActionT m b -&gt; ActionT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679119136"><span id="local-6989586621679119141"><span id="local-6989586621679119145"><span class="annot"><span class="annottext">Applicative (ActionT m)
Applicative (ActionT m) =&gt;
(forall a b. ActionT m a -&gt; (a -&gt; ActionT m b) -&gt; ActionT m b)
-&gt; (forall a b. ActionT m a -&gt; ActionT m b -&gt; ActionT m b)
-&gt; (forall a. a -&gt; ActionT m a)
-&gt; Monad (ActionT m)
forall a. a -&gt; ActionT m a
forall a b. ActionT m a -&gt; ActionT m b -&gt; ActionT m b
forall a b. ActionT m a -&gt; (a -&gt; ActionT m b) -&gt; ActionT m b
forall (m :: * -&gt; *). Monad m =&gt; Applicative (ActionT m)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; ActionT m a
forall (m :: * -&gt; *) a b.
Monad m =&gt;
ActionT m a -&gt; ActionT m b -&gt; ActionT m b
forall (m :: * -&gt; *) a b.
Monad m =&gt;
ActionT m a -&gt; (a -&gt; ActionT m b) -&gt; ActionT m b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
ActionT m a -&gt; (a -&gt; ActionT m b) -&gt; ActionT m b
&gt;&gt;= :: forall a b. ActionT m a -&gt; (a -&gt; ActionT m b) -&gt; ActionT m b
$c&gt;&gt; :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
ActionT m a -&gt; ActionT m b -&gt; ActionT m b
&gt;&gt; :: forall a b. ActionT m a -&gt; ActionT m b -&gt; ActionT m b
$creturn :: forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; ActionT m a
return :: forall a. a -&gt; ActionT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679119153"><span class="annot"><span class="annottext">Monad (ActionT m)
Monad (ActionT m) =&gt;
(forall a. IO a -&gt; ActionT m a) -&gt; MonadIO (ActionT m)
forall a. IO a -&gt; ActionT m a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
forall (m :: * -&gt; *). MonadIO m =&gt; Monad (ActionT m)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; ActionT m a
$cliftIO :: forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; ActionT m a
liftIO :: forall a. IO a -&gt; ActionT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679119162"><span id="local-6989586621679119167"><span id="local-6989586621679119171"><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionEnv"><span class="hs-identifier hs-type">ActionEnv</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679119180"><span class="annot"><span class="annottext">(forall (m :: * -&gt; *). Monad m =&gt; Monad (ActionT m)) =&gt;
(forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ActionT m a)
-&gt; MonadTrans ActionT
forall (m :: * -&gt; *). Monad m =&gt; Monad (ActionT m)
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ActionT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *).
(forall (m :: * -&gt; *). Monad m =&gt; Monad (t m)) =&gt;
(forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; t m a) -&gt; MonadTrans t
$clift :: forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ActionT m a
lift :: forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ActionT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadTrans</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679119198"><span class="annot"><span class="annottext">Monad (ActionT m)
Monad (ActionT m) =&gt;
(forall e a. (HasCallStack, Exception e) =&gt; e -&gt; ActionT m a)
-&gt; MonadThrow (ActionT m)
forall e a. (HasCallStack, Exception e) =&gt; e -&gt; ActionT m a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall e a. (HasCallStack, Exception e) =&gt; e -&gt; m a)
-&gt; MonadThrow m
forall (m :: * -&gt; *). MonadThrow m =&gt; Monad (ActionT m)
forall (m :: * -&gt; *) e a.
(MonadThrow m, HasCallStack, Exception e) =&gt;
e -&gt; ActionT m a
$cthrowM :: forall (m :: * -&gt; *) e a.
(MonadThrow m, HasCallStack, Exception e) =&gt;
e -&gt; ActionT m a
throwM :: forall e a. (HasCallStack, Exception e) =&gt; e -&gt; ActionT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadThrow</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679119220"><span class="annot"><span class="annottext">MonadThrow (ActionT m)
MonadThrow (ActionT m) =&gt;
(forall e a.
 (HasCallStack, Exception e) =&gt;
 ActionT m a -&gt; (e -&gt; ActionT m a) -&gt; ActionT m a)
-&gt; MonadCatch (ActionT m)
forall e a.
(HasCallStack, Exception e) =&gt;
ActionT m a -&gt; (e -&gt; ActionT m a) -&gt; ActionT m a
forall (m :: * -&gt; *). MonadCatch m =&gt; MonadThrow (ActionT m)
forall (m :: * -&gt; *) e a.
(MonadCatch m, HasCallStack, Exception e) =&gt;
ActionT m a -&gt; (e -&gt; ActionT m a) -&gt; ActionT m a
forall (m :: * -&gt; *).
MonadThrow m =&gt;
(forall e a.
 (HasCallStack, Exception e) =&gt;
 m a -&gt; (e -&gt; m a) -&gt; m a)
-&gt; MonadCatch m
$ccatch :: forall (m :: * -&gt; *) e a.
(MonadCatch m, HasCallStack, Exception e) =&gt;
ActionT m a -&gt; (e -&gt; ActionT m a) -&gt; ActionT m a
catch :: forall e a.
(HasCallStack, Exception e) =&gt;
ActionT m a -&gt; (e -&gt; ActionT m a) -&gt; ActionT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadCatch</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679119232"><span id="local-6989586621679119247"><span class="annot"><span class="hs-identifier hs-type">MonadBase</span></span><span> </span><span class="annot"><a href="#local-6989586621679119232"><span class="hs-identifier hs-type">b</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679119257"><span id="local-6989586621679119263"><span id="local-6989586621679119269"><span class="annot"><span class="hs-identifier hs-type">MonadBaseControl</span></span><span> </span><span class="annot"><a href="#local-6989586621679119257"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679119283"><span id="local-6989586621679119293"><span class="annot"><span class="annottext">MonadTrans ActionT
MonadTrans ActionT =&gt;
(forall (m :: * -&gt; *) a.
 Monad m =&gt;
 (Run ActionT -&gt; m a) -&gt; ActionT m a)
-&gt; (forall (m :: * -&gt; *) a.
    Monad m =&gt;
    m (StT ActionT a) -&gt; ActionT m a)
-&gt; MonadTransControl ActionT
forall (m :: * -&gt; *) a. Monad m =&gt; m (StT ActionT a) -&gt; ActionT m a
forall (m :: * -&gt; *) a.
Monad m =&gt;
(Run ActionT -&gt; m a) -&gt; ActionT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *).
MonadTrans t =&gt;
(forall (m :: * -&gt; *) a. Monad m =&gt; (Run t -&gt; m a) -&gt; t m a)
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; m (StT t a) -&gt; t m a)
-&gt; MonadTransControl t
$cliftWith :: forall (m :: * -&gt; *) a.
Monad m =&gt;
(Run ActionT -&gt; m a) -&gt; ActionT m a
liftWith :: forall (m :: * -&gt; *) a.
Monad m =&gt;
(Run ActionT -&gt; m a) -&gt; ActionT m a
$crestoreT :: forall (m :: * -&gt; *) a. Monad m =&gt; m (StT ActionT a) -&gt; ActionT m a
restoreT :: forall (m :: * -&gt; *) a. Monad m =&gt; m (StT ActionT a) -&gt; ActionT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadTransControl</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679119306"><span class="annot"><span class="annottext">MonadIO (ActionT m)
MonadIO (ActionT m) =&gt;
(forall b.
 ((forall a. ActionT m a -&gt; IO a) -&gt; IO b) -&gt; ActionT m b)
-&gt; MonadUnliftIO (ActionT m)
forall b. ((forall a. ActionT m a -&gt; IO a) -&gt; IO b) -&gt; ActionT m b
forall (m :: * -&gt; *).
MonadIO m =&gt;
(forall b. ((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b)
-&gt; MonadUnliftIO m
forall (m :: * -&gt; *). MonadUnliftIO m =&gt; MonadIO (ActionT m)
forall (m :: * -&gt; *) b.
MonadUnliftIO m =&gt;
((forall a. ActionT m a -&gt; IO a) -&gt; IO b) -&gt; ActionT m b
$cwithRunInIO :: forall (m :: * -&gt; *) b.
MonadUnliftIO m =&gt;
((forall a. ActionT m a -&gt; IO a) -&gt; IO b) -&gt; ActionT m b
withRunInIO :: forall b. ((forall a. ActionT m a -&gt; IO a) -&gt; IO b) -&gt; ActionT m b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadUnliftIO</span></span></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span class="annot"><span class="hs-comment">-- | Models the invariant that only 'StatusError's can be thrown and caught.</span></span><span>
</span><span id="line-212"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679118708"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679118708"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#StatusError"><span class="hs-identifier hs-type">StatusError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionT"><span class="hs-identifier hs-type">ActionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118708"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-213"></span><span>  </span><span id="local-6989586621679119322"><span class="annot"><span class="annottext">throwError :: forall a. StatusError -&gt; ActionT m a
</span><a href="#local-6989586621679119322"><span class="hs-identifier hs-var hs-var hs-var hs-var">throwError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StatusError -&gt; ActionT m a
forall a e. Exception e =&gt; e -&gt; a
</span><span class="hs-identifier hs-var">E.throw</span></span><span>
</span><span id="line-214"></span><span>  </span><span id="local-6989586621679119327"><span class="annot"><span class="annottext">catchError :: forall a.
ActionT m a -&gt; (StatusError -&gt; ActionT m a) -&gt; ActionT m a
</span><a href="#local-6989586621679119327"><span class="hs-identifier hs-var hs-var hs-var hs-var">catchError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ActionT m a -&gt; (StatusError -&gt; ActionT m a) -&gt; ActionT m a
forall (m :: * -&gt; *) e a.
(MonadUnliftIO m, Exception e) =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><span class="hs-identifier hs-var">catch</span></span><span>
</span><span id="line-215"></span><span class="annot"><span class="hs-comment">-- | Modeled after the behaviour in scotty &lt; 0.20, 'fail' throws a 'StatusError' with code 500 (&quot;Server Error&quot;), which can be caught with 'E.catch' or 'rescue'.</span></span><span>
</span><span id="line-216"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679118717"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679118717"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadFail</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionT"><span class="hs-identifier hs-type">ActionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118717"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-217"></span><span>  </span><span id="local-6989586621679119338"><span class="annot"><span class="annottext">fail :: forall a. String -&gt; ActionT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fail</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StatusError -&gt; ActionT m a
forall a e. Exception e =&gt; e -&gt; a
</span><span class="hs-identifier hs-var">E.throw</span></span><span> </span><span class="annot"><span class="annottext">(StatusError -&gt; ActionT m a)
-&gt; (String -&gt; StatusError) -&gt; String -&gt; ActionT m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Status -&gt; Text -&gt; StatusError
</span><a href="Web.Scotty.Internal.Types.html#StatusError"><span class="hs-identifier hs-var">StatusError</span></a></span><span> </span><span class="annot"><span class="annottext">Status
</span><span class="hs-identifier hs-var">status500</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; StatusError) -&gt; (String -&gt; Text) -&gt; String -&gt; StatusError
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">pack</span></span><span>
</span><span id="line-218"></span><span class="annot"><span class="hs-comment">-- | 'empty' throws 'ActionError' 'AENext', whereas '(&lt;|&gt;)' catches any 'ActionError's or 'StatusError's in the first action and proceeds to the second one.</span></span><span>
</span><span id="line-219"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679118728"><span id="local-6989586621679119350"><span id="local-6989586621679119354"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679118728"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Alternative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionT"><span class="hs-identifier hs-type">ActionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118728"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-220"></span><span>  </span><span id="local-6989586621679119360"><span class="annot"><span class="annottext">empty :: forall a. ActionT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">empty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ActionError -&gt; ActionT m a
forall a e. Exception e =&gt; e -&gt; a
</span><span class="hs-identifier hs-var">E.throw</span></span><span> </span><span class="annot"><span class="annottext">ActionError
</span><a href="Web.Scotty.Internal.Types.html#AENext"><span class="hs-identifier hs-var">AENext</span></a></span><span>
</span><span id="line-221"></span><span>  </span><span id="local-6989586621679119363"><span class="annot"><span class="annottext">ActionT m a
</span><a href="#local-6989586621679119363"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679119364"><span class="annot"><span class="annottext">&lt;|&gt; :: forall a. ActionT m a -&gt; ActionT m a -&gt; ActionT m a
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;|&gt;</span></span></span><span> </span><span id="local-6989586621679119365"><span class="annot"><span class="annottext">ActionT m a
</span><a href="#local-6989586621679119365"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-222"></span><span>    </span><span id="local-6989586621679119366"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679119366"><span class="hs-identifier hs-var">ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ActionT m a -&gt; ActionT m Bool
forall (m :: * -&gt; *) a. MonadUnliftIO m =&gt; m a -&gt; m Bool
</span><a href="Web.Scotty.Internal.Types.html#tryAnyStatus"><span class="hs-identifier hs-var">tryAnyStatus</span></a></span><span> </span><span class="annot"><span class="annottext">ActionT m a
</span><a href="#local-6989586621679119363"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-223"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679119366"><span class="hs-identifier hs-var">ok</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ActionT m a
</span><a href="#local-6989586621679119363"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">ActionT m a
</span><a href="#local-6989586621679119365"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-224"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679118736"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679118736"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadPlus</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionT"><span class="hs-identifier hs-type">ActionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118736"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-225"></span><span>  </span><span id="local-6989586621679119380"><span class="annot"><span class="annottext">mzero :: forall a. ActionT m a
</span><a href="#local-6989586621679119380"><span class="hs-identifier hs-var hs-var hs-var hs-var">mzero</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ActionT m a
forall a. ActionT m a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a
</span><span class="hs-identifier hs-var">empty</span></span><span>
</span><span id="line-226"></span><span>  </span><span id="local-6989586621679119383"><span class="annot"><span class="annottext">mplus :: forall a. ActionT m a -&gt; ActionT m a -&gt; ActionT m a
</span><a href="#local-6989586621679119383"><span class="hs-identifier hs-var hs-var hs-var hs-var">mplus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ActionT m a -&gt; ActionT m a -&gt; ActionT m a
forall a. ActionT m a -&gt; ActionT m a -&gt; ActionT m a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">(&lt;|&gt;)</span></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="annot"><span class="hs-comment">-- | catches either ActionError (thrown by 'next') or 'StatusError' (thrown if e.g. a query parameter is not found)</span></span><span>
</span><span id="line-229"></span><span id="local-6989586621679119385"><span id="local-6989586621679119386"><span class="annot"><a href="Web.Scotty.Internal.Types.html#tryAnyStatus"><span class="hs-identifier hs-type">tryAnyStatus</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679119385"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679119385"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679119386"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679119385"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span><span>
</span><span id="line-230"></span><span id="tryAnyStatus"><span class="annot"><span class="annottext">tryAnyStatus :: forall (m :: * -&gt; *) a. MonadUnliftIO m =&gt; m a -&gt; m Bool
</span><a href="Web.Scotty.Internal.Types.html#tryAnyStatus"><span class="hs-identifier hs-var hs-var">tryAnyStatus</span></a></span></span><span> </span><span id="local-6989586621679119395"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679119395"><span class="hs-identifier hs-var">io</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679119395"><span class="hs-identifier hs-var">io</span></a></span><span> </span><span class="annot"><span class="annottext">m a -&gt; m Bool -&gt; m Bool
forall a b. m a -&gt; m b -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; m Bool
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m Bool -&gt; [Handler m Bool] -&gt; m Bool
forall (m :: * -&gt; *) a.
MonadUnliftIO m =&gt;
m a -&gt; [Handler m a] -&gt; m a
</span><span class="hs-operator hs-var">`catches`</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Handler m Bool
</span><a href="#local-6989586621679119396"><span class="hs-identifier hs-var">h1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Handler m Bool
</span><a href="#local-6989586621679119397"><span class="hs-identifier hs-var">h2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-232"></span><span>    </span><span id="local-6989586621679119396"><span class="annot"><span class="annottext">h1 :: Handler m Bool
</span><a href="#local-6989586621679119396"><span class="hs-identifier hs-var hs-var">h1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ActionError -&gt; m Bool) -&gt; Handler m Bool
forall (m :: * -&gt; *) a e. Exception e =&gt; (e -&gt; m a) -&gt; Handler m a
</span><span class="hs-identifier hs-var">Handler</span></span><span> </span><span class="annot"><span class="annottext">((ActionError -&gt; m Bool) -&gt; Handler m Bool)
-&gt; (ActionError -&gt; m Bool) -&gt; Handler m Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ActionError
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionError"><span class="hs-identifier hs-type">ActionError</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; m Bool
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-233"></span><span>    </span><span id="local-6989586621679119397"><span class="annot"><span class="annottext">h2 :: Handler m Bool
</span><a href="#local-6989586621679119397"><span class="hs-identifier hs-var hs-var">h2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(StatusError -&gt; m Bool) -&gt; Handler m Bool
forall (m :: * -&gt; *) a e. Exception e =&gt; (e -&gt; m a) -&gt; Handler m a
</span><span class="hs-identifier hs-var">Handler</span></span><span> </span><span class="annot"><span class="annottext">((StatusError -&gt; m Bool) -&gt; Handler m Bool)
-&gt; (StatusError -&gt; m Bool) -&gt; Handler m Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">StatusError
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#StatusError"><span class="hs-identifier hs-type">StatusError</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; m Bool
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679118752"><span id="local-6989586621679118753"><span id="local-6989586621679119407"><span id="local-6989586621679119411"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="#local-6989586621679118752"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyT"><span class="hs-identifier hs-type">ScottyT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118753"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118752"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-236"></span><span>  </span><span id="local-6989586621679119419"><span class="annot"><span class="annottext">ScottyT m a
</span><a href="#local-6989586621679119419"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679119420"><span class="annot"><span class="annottext">&lt;&gt; :: ScottyT m a -&gt; ScottyT m a -&gt; ScottyT m a
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span id="local-6989586621679119421"><span class="annot"><span class="annottext">ScottyT m a
</span><a href="#local-6989586621679119421"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; a -&gt; a) -&gt; ScottyT m a -&gt; ScottyT m (a -&gt; a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ScottyT m a
</span><a href="#local-6989586621679119419"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">ScottyT m (a -&gt; a) -&gt; ScottyT m a -&gt; ScottyT m a
forall a b. ScottyT m (a -&gt; b) -&gt; ScottyT m a -&gt; ScottyT m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ScottyT m a
</span><a href="#local-6989586621679119421"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-239"></span><span>  </span><span id="local-6989586621679118759"><span id="local-6989586621679118760"><span id="local-6989586621679119429"><span id="local-6989586621679119433"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679118759"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-cpp">
#if !(MIN_VERSION_base(4,11,0))
</span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">Semigroup</span><span> </span><span class="hs-identifier">a</span><span class="hs-cpp">
#endif
</span><span class="hs-cpp">#if !(MIN_VERSION_base(4,8,0))
</span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">Functor</span><span> </span><span class="hs-identifier">m</span><span class="hs-cpp">
#endif
</span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ScottyT"><span class="hs-identifier hs-type">ScottyT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118760"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118759"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-247"></span><span>  </span><span id="local-6989586621679119439"><span class="annot"><span class="annottext">mempty :: ScottyT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; ScottyT m a
forall a. a -&gt; ScottyT m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">a
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-cpp">
#if !(MIN_VERSION_base(4,11,0))
</span><span>  </span><span class="hs-identifier">mappend</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator">&lt;&gt;</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-252"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-253"></span><span>  </span><span id="local-6989586621679118764"><span id="local-6989586621679118765"><span id="local-6989586621679119444"><span id="local-6989586621679119448"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679118764"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-cpp">
#if !(MIN_VERSION_base(4,8,0))
</span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">Functor</span><span> </span><span class="hs-identifier">m</span><span class="hs-cpp">
#endif
</span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="#local-6989586621679118765"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionT"><span class="hs-identifier hs-type">ActionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118764"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118765"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-259"></span><span>  </span><span id="local-6989586621679119457"><span class="annot"><span class="annottext">ActionT m a
</span><a href="#local-6989586621679119457"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679119458"><span class="annot"><span class="annottext">&lt;&gt; :: ActionT m a -&gt; ActionT m a -&gt; ActionT m a
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span id="local-6989586621679119459"><span class="annot"><span class="annottext">ActionT m a
</span><a href="#local-6989586621679119459"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; a -&gt; a) -&gt; ActionT m a -&gt; ActionT m (a -&gt; a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ActionT m a
</span><a href="#local-6989586621679119457"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">ActionT m (a -&gt; a) -&gt; ActionT m a -&gt; ActionT m a
forall a b. ActionT m (a -&gt; b) -&gt; ActionT m a -&gt; ActionT m b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ActionT m a
</span><a href="#local-6989586621679119459"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-262"></span><span>  </span><span id="local-6989586621679118768"><span id="local-6989586621679118769"><span id="local-6989586621679119467"><span id="local-6989586621679119471"><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679118768"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679118769"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-cpp">
#if !(MIN_VERSION_base(4,11,0))
</span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">Semigroup</span><span> </span><span class="hs-identifier">a</span><span class="hs-cpp">
#endif
</span><span class="hs-cpp">#if !(MIN_VERSION_base(4,8,0))
</span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">Functor</span><span> </span><span class="hs-identifier">m</span><span class="hs-cpp">
#endif
</span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#ActionT"><span class="hs-identifier hs-type">ActionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118768"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679118769"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-270"></span><span>  </span><span id="local-6989586621679119475"><span class="annot"><span class="annottext">mempty :: ActionT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; ActionT m a
forall a. a -&gt; ActionT m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">a
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-cpp">
#if !(MIN_VERSION_base(4,11,0))
</span><span>  </span><span class="hs-identifier">mappend</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator">&lt;&gt;</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-275"></span><span class="hs-comment">------------------ Scotty Routes --------------------</span><span>
</span><span id="line-276"></span><span class="hs-keyword">data</span><span> </span><span id="RoutePattern"><span class="annot"><a href="Web.Scotty.Internal.Types.html#RoutePattern"><span class="hs-identifier hs-var">RoutePattern</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Capture"><span class="annot"><a href="Web.Scotty.Internal.Types.html#Capture"><span class="hs-identifier hs-var">Capture</span></a></span></span><span>   </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-277"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="Literal"><span class="annot"><a href="Web.Scotty.Internal.Types.html#Literal"><span class="hs-identifier hs-var">Literal</span></a></span></span><span>   </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-278"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="Function"><span class="annot"><a href="Web.Scotty.Internal.Types.html#Function"><span class="hs-identifier hs-var">Function</span></a></span></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Request</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Web.Scotty.Internal.Types.html#Param"><span class="hs-identifier hs-type">Param</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsString</span></span><span> </span><span class="annot"><a href="Web.Scotty.Internal.Types.html#RoutePattern"><span class="hs-identifier hs-type">RoutePattern</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-281"></span><span>    </span><span id="local-6989586621679119482"><span class="annot"><span class="annottext">fromString :: String -&gt; RoutePattern
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fromString</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; RoutePattern
</span><a href="Web.Scotty.Internal.Types.html#Capture"><span class="hs-identifier hs-var">Capture</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; RoutePattern)
-&gt; (String -&gt; Text) -&gt; String -&gt; RoutePattern
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">pack</span></span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span></pre></body></html>